<h2 mat-dialog-title class="title">Reset password</h2>
<div mat-dialog-content *ngIf="allowEditPassword && !loading">
  <form [formGroup]="authForm" class="main-content">
   
    <mat-form-field>
      <mat-label>Old password</mat-label>
      <input [type]="hidePass ? 'password' : 'text'" formControlName="oldPassword" [(ngModel)]="oldPassword" [ngClass]="{ 'is-invalid': submitted && f.oldPassword.errors,
      'is-valid': submitted && !f.oldPassword.errors}" matInput placeholder="Old password">
      <mat-error *ngIf="submitted && f.oldPassword.errors">
        Please enter a old password.
      </mat-error>
      <mat-icon matSuffix (click)="hidePass = !hidePass">{{hidePass ? 'visibility' : 'visibility_off'}}</mat-icon>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Password</mat-label>
      <input formControlName="password" [(ngModel)]="password" [ngClass]="{ 'is-invalid': submitted && f.password.errors,
      'is-valid': submitted && !f.password.errors}" matInput
        [type]="hidePass ? 'password' : 'text'" placeholder="Password">    
        <mat-error *ngIf="submitted && f.password.errors">
          Password must be from 4 to 16 characters.
        </mat-error>
        <mat-icon matSuffix (click)="hidePass = !hidePass">{{hidePass ? 'visibility' : 'visibility_off'}}</mat-icon>
    </mat-form-field>

    <mat-form-field>
        <mat-label>Confirm password</mat-label>
        <input formControlName="confirmPassword" [(ngModel)]="confirmPassword" [ngClass]="{ 'is-invalid': submitted && f.confirmPassword.errors,
        'is-valid': submitted && !f.confirmPassword.errors}" matInput
          [type]="hidePass ? 'password' : 'text'" placeholder="Confirm password">    
          <mat-error *ngIf="submitted && f.confirmPassword.errors">
            Passwords must be equals.
          </mat-error>
          <mat-icon matSuffix (click)="hidePass = !hidePass">{{hidePass ? 'visibility' : 'visibility_off'}}</mat-icon>
      </mat-form-field>

  </form>
</div>

<div class="actions" *ngIf="allowEditPassword && !loading">
  <button mat-raised-button (click)="close()">Back</button>
  <button mat-raised-button color="accent"
    (click)="reset()">reset</button>
</div>

<div *ngIf="!allowEditPassword && isConfirmed && !loading">
  We sent mail to your email address with confirmation link!
</div>

<div *ngIf="!allowEditPassword && !isConfirmed && !loading">
  <p class="text-center">Are your sure?</p> 
  <div class="actions">
    <button mat-raised-button color="accent"
    (click)="confirm()">Confirm</button>
    <button mat-raised-button 
    (click)="close()">Cancel</button>
  </div> 
</div>

<div  class="mat-spinner-wrapper position-relative">
  <mat-spinner *ngIf="loading"></mat-spinner>
</div>
